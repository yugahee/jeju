<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

<!-- 숙소예약 화면(썸네일 부분) list  -->
<entry key="selectRoom">
	   SELECT 
		     LOCATION,
		     ROOM_NAME,
		     ROOM_TITLE,
		     PRICE,
		     ROUND(AVG(STAR),1) STAR,
		     FILE_PATH,
		     CHANGE_NAME,
		     ROOM_NO
		 FROM ROOMS R
		 LEFT OUTER JOIN FILES F USING(ROOM_NO)
	  	 LEFT OUTER JOIN ROOMS_REVIEW USING(ROOM_NO)
	  	WHERE FILE_LEVEL = 0
		GROUP BY LOCATION, ROOM_NAME, ROOM_TITLE, PRICE, FILE_PATH, CHANGE_NAME, ROOM_NO
		ORDER BY ROOM_NO DESC
</entry>

<entry key="detailSelectRoom">
	SELECT 
	       ROOM_NAME <!-- 숙소명 -->
	     , ROOM_DES  <!-- 숙소 소개 -->
	     , MIN_PEOPLE  <!-- 최소 인원 -->
	     , MAX_PEOPLE  <!-- 최대 인원 -->
	     , MIN_STAY     <!-- 최소 숙박 일수  -->
	     , MAX_STAY     <!-- 최대 숙박 일수 -->
	     , PRICE	 <!-- 1박 기준 가격 -->
	     , EXTRA_COST <!-- 추가인원 금액 -->
	     , START_TIME  <!-- 입실 시간  -->
	     , END_TIME    <!--퇴실 시간  -->
	     , ROOM_TYPE <!-- 숙소 종류  -->
	     , BUILDING_TYPE  <!-- 건물 유형 -->
	     , ROOM_SIZE	 <!-- 건물 평수 -->
	     , ROOM        <!-- 방 수  -->
	     , BED         <!-- 침대 수  -->
	     , BATH 	   <!-- 욕실 수 -->
	     , ROOM_FAC  <!-- 숙소 시설 : 기본, 추가, 특별, 안전 합침  -->
	     , ROOM_LINK <!-- 유튜브 주소 -->
	     <!-- 파일  -->
	     , CHANGE_NAME
		 , ROOM_NO
		 , FILE_PATH
		 , FILE_NO
	  FROM ROOMS R	
	  JOIN FILES F USING(ROOM_NO)
	 WHERE R.STATUS = 'Y'
       AND F.STATUS = 'Y'
       AND ROOM_NO = ? 
</entry>


<entry key="userReservation">
	SELECT
	    ROOM_RESERVE
	    , START_DATE
	    , END_DATE
	    , PERSON_RESERVE    
	    , RESERVE_NUM
	    , RESERVE_STATE
	    , ROOM_NO
	    , ROOM_NAME
	    , ADDRESS
	    , START_TIME
	    , END_TIME
	    , FILE_PATH
	    , CHANGE_NAME
	FROM RESERVATION
	JOIN ROOMS USING(ROOM_NO)
	JOIN FILES USING(ROOM_NO)
	WHERE GUEST = ?
	AND RESERVE_STATE != '예약취소'
	AND FILE_LEVEL = 0
</entry>

<entry key="reservationCancle">
	UPDATE RESERVATION
	SET RESERVE_STATE = '예약취소'
	WHERE ROOM_RESERVE = ?
</entry>

<entry key="reserveEndUpdate">
	UPDATE RESERVATION
	SET RESERVE_STATE = '숙박완료'
	WHERE ROOM_RESERVE = ?
</entry>

<entry key="selectRoomReview">
    SELECT
           STAR
         , REVIEW
         , REVIEW_DATE
         , USER_NAME
      FROM ROOMS_REVIEW
      JOIN MEMBER USING(USER_ID)
     WHERE ROOM_NO = ?
</entry>


<!-- 예약 정보 insert -->
<entry key="insertReservation">
	INSERT
	 INTO RESERVATION
	 (
	 	 ROOM_RESERVE
		,START_DATE
		,END_DATE
		,PERSON_RESERVE <!-- 예약자명  -->
		,PONE
		,RESERVE_STATE
		,RESERVE_NUM <!-- 예약인원  -->
		,GUEST  <!-- 게스트ID  -->
		,ROOM_NO
	 )
	 VALUES
	 (   SEQ_ROOMRESERVE.NEXTVAL
	   , ?
	   , ?
	   , ?
	   , ?
	   , '예약신청'
	   , ?
	   , ?
	   , ?
	 )  
</entry>

<!-- 예약정보조회  -->
<entry key="selectReserveInfo">

	SELECT 
	       ROOM_RESERVE <!-- 예약번호  -->
		 , START_DATE
		 , END_DATE
		 , PERSON_RESERVE  <!-- 예약자명  -->
		 , PONE
		 , RESERVE_STATE
		 , RESERVE_NUM
		 , ROOM_NO
		 , ROOM_NAME
		 , USER_ID  
	  FROM RESERVATION
	  JOIN ROOMS USING(ROOM_NO)
	 WHERE USER_ID = ? 
</entry>


<entry key="paymentWait">
	UPDATE RESERVATION
	   SET RESERVE_STATE = '결제대기'
	 WHERE ROOM_RESERVE = ?
</entry>

<entry key="reviewComplete">
	UPDATE RESERVATION
	   SET RESERVE_STATE = '리뷰완료'
	 WHERE ROOM_RESERVE = ?
</entry>


</properties>